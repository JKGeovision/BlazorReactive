@using BlazorReactive.ViewModels;
@using ReactiveUI;
@using ReactiveUI.Blazor;
@inherits ReactiveComponentBase<BodyViewModel>;

@if (ViewModel != null)
{
	<div style="display: flex; flex-direction: row; gap: 1rem;">
		<BodySidebar
			BodyViewModel="@ViewModel"
			RenderCountViewModel="@RenderCountViewModel"
		/>
		<BodyList
			BodyViewModel="@ViewModel"
			RenderCountViewModel="@RenderCountViewModel"
		/>
	</div>
}

@code {

	[Parameter]
	public RenderCountViewModel? RenderCountViewModel { get; set; }

	protected override void OnAfterRender(bool firstRender)
	{
		if (RenderCountViewModel != null)
		{
			RenderCountViewModel.BodyRenderCount++;
		}
		base.OnAfterRender(firstRender);
	}

	protected override bool ShouldRender() => false;

}
